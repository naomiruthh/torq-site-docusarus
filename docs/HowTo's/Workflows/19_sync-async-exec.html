<!-- ## Metadata_Start
## title: Sync/async execution of a specific workflow with an integration trigger
## original-url : https://learn.torq.io/docs/sync-async-execution-of-a-specific-workflow-with-an-integration-trigger
## article-id : da45b216-820c-49db-880d-97a63c173a6f
## seo-title : Execute a specific workflow with an integration trigger
## description : Execute a specific workflow by extending the trigger integration webhook (endpoint) to include the workflow ID. Poll the execution to get the output.
## category-type : html
## Metadata_End -->
<p>Webhooks are used in Torq to trigger workflows with events from third-party vendors. When you create a trigger integration (of a specific third-party vendor or a generic webhook), you get a webhook (endpoint) that you can provide to any third-party vendor to get events from them. The integration can be set as a trigger for any number of workflows.</p><p><meta charset="utf-8"></p><p>You can extend an integration webhook (endpoint) to have it trigger a specific workflow by <a href="/v1/docs/use-a-webhook-path-to-trigger-a-specific-workflow#create-the-extended-webhook-path" rel="nofollow" translate="no">concatenating the workflow ID</a>. You can also select whether to execute it <meta charset="utf-8"><span style="color: rgb(34, 34, 34); font-family: Inter, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;"><strong>synchronously or asynchronously</strong>. For synchronous executions, you can <a href="/v1/docs/execute-a-specific-workflow-with-an-integration-trigger#synchronous-execution-use-output-parameters-to-determine-the-http-response" rel="nofollow" translate="no">use output parameters to modify the response</a> status, body, and headers according to your needs.</span></p><section class="infoBox"><div class="title">Note</div><div class="content"><div class="content">Webhooks of all trigger integrations (vendor integrations and generic) can be extended to trigger a specific workflow.</div></div></section><h2>When to use</h2><ul><li>Synchronous executions enable external systems to trigger a specific workflow and get a fully customizable response based on the workflow logic and output: define the status, body, and headers of the response returned by Torq according to the third-party requirements.</li><li>Asynchronous executions can be used to test a new or modified workflow. Trigger only the workflow you want to test with a predetermined trigger event and check that the execution output matches the expected output.</li></ul><h2>Create the extended webhook<img src="https://cdn.document360.io/e159bc51-b5b1-4b1f-af39-a9db2fa968d6/Images/Documentation/Copy%20the%20trigger%20webhook%20URL.png" alt="Copy the trigger webhook URL" class="fr-dib fr-bordered"></h2><ol><li>Copy the integration webhook from the workflow trigger by selecting <strong>Copy Webhook URL</strong>.</li><li>To get the workflow ID, you can open the workflow and copy the ID from the browser address bar or use the public API <a href="https://learn.torq.io/apidocs/list-workflows" rel="nofollow" translate="no">l<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">ist workflows</a> call with the <code>name</code> query parameter.<br><img src="https://cdn.document360.io/e159bc51-b5b1-4b1f-af39-a9db2fa968d6/Images/Documentation/Get%20the%20workflow%20ID%20from%20the%20browser%20address%20bar.png" alt="Get the workflow ID from the browser address bar" class="fr-dib fr-bordered"></li><li>Create the extended webhook: <code>&lt;integration webhook&gt;/workflows/&lt;workflow ID&gt;</code>. For example: <code>https://hooks.torq.io/v1/webhooks/af6aab8d-****-****-****-74259a93b18f/workflows/710c5349-b617-****-****-e15671ca4ffb</code></li><li>For a synchronous execution, add <code>/sync</code> at the end of the extended webhook: <meta charset="utf-8"><span style="color: rgb(214, 51, 132); font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;"><a href="https://hooks.torq.io/v1/webhooks/af6aab8d-****-****-****-74259a93b18f/workflows/710c5349-b617-****-****-e15671ca4ffb/sync">https://hooks.torq.io/v1/webhooks/af6aab8d-****-****-****-74259a93b18f/workflows/710c5349-b617-****-****-e15671ca4ffb/sync</a></span><section class="infoBox"><div class="title">Note</div><div class="content">The workflow will be executed in production using the latest published version. If the workflow doesn't have a published version, it won't be executed.</div></section></li></ol><h2>Execute the workflow</h2><p>Provide the extended webhook (synchronous or asynchronous) to a third-party vendor to trigger the specific workflow when receiving an event. Alternatively, you can use the extended webhook to trigger the workflow manually, simulating the automatic trigger.</p><p>Below is an example of the cURL syntax to trigger the workflow.</p><section class="infoBox"><div class="title">Note</div><div class="content"><ul><li>The cURL command accounts for authentication headers the webhook may have. We recommend using<span style="color: rgb(0, 106, 138); font-family: Inter, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(221, 247, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">&nbsp;authentication headers to improve security and prevent unauthorized access to your data.&nbsp;</span></li><li><span style="color: rgb(0, 106, 138); font-family: Inter, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(221, 247, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">Don't forget to add <code>/sync</code> to the extended webhook if you're interested in a synchronous execution.</span></li></ul></div></section><pre><code class="language-custom" data-code-id="section-1683791999022" data-custom-title="cURL" data-language="custom">curl https://hooks.torq.io/v1/webhooks/c881b7c2-****-****-****-3b2b33556dff/workflows/7623b5a1-****-****-****-51f61916b147 -H "auth_header_name:secret" -d '{"body": [1,2,3]}'</code></pre><p>The trigger event for this example is:</p><pre><code class="language-json" data-code-id="section-1683793625712" data-language="json">{
  "body": [
    1,
    2,
    3
  ]
}</code></pre><h2>Get the execution output</h2><p><meta charset="utf-8"></p><p>Getting the output differs according to whether the workflow execution is synchronous or asynchronous.</p><h3><strong>Synchronous execution</strong></h3><p>The response to the execution request <meta charset="utf-8"><span style="color: rgb(34, 34, 34); font-family: Inter, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">from the previous section</span> will contain the execution output and will be returned as soon as it's available. If the execution takes more than 50 seconds to complete, the <code>Execution is in progress</code> response and the execution ID will be returned after 50 seconds. Use the execution ID to retrieve the execution status as you would for asynchronous execution. Note that you can <a href="/v1/docs/execute-a-specific-workflow-with-an-integration-trigger#synchronous-execution-use-output-parameters-to-determine-the-http-response" rel="nofollow" translate="no">use output parameters to modify the HTTP response</a> according to your needs.</p><h3><strong>Asynchronous execution</strong></h3><ol><li>The response to the execution request from the previous section will contain the execution ID: <code>{"execution_id":"c9a0769f-b8a3-****-****-b57c138b5523","status":"ok"}</code></li><li>Use the Torq public API <a href="https://learn.torq.io/apidocs/retrieve-an-execution" rel="nofollow" translate="no">retrieve an execution</a> call to continuously check the execution status until the execution is complete and the output is available.</li></ol><pre><code class="language-custom" data-code-id="section-1683801199059" data-custom-title="cURL" data-language="custom">curl --request GET \
  --url https://api.torq.io/public/v1alpha/executions/&lt;execution_id&gt; \
  --header 'Authorization: Bearer &lt;bearer_token&gt;' \
  --header 'accept: application/json'</code></pre><h3><meta charset="utf-8"></h3><p><meta charset="utf-8"></p><h2>Synchronous execution: use output parameters to determine the HTTP response</h2><p>By default, the workflow execution output will contain the output parameters and values or JSON object defined in the Exit operator.</p><p>There are three parameter names you can use to modify the HTTP response:</p><section class="infoBox"><div class="title">Note</div><div class="content">The parameters below (body, status, headers) will only modify the HTTP response for <strong>synchronous</strong> executions.</div></section><table style="width: 100%;"><thead><tr><th>Parameter name</th><th>Description</th><th>How to use</th></tr></thead><tbody><tr><td style="width: 33.3333%;"><strong>body</strong></td><td style="width: 33.3333%;"><meta charset="utf-8"><span style="color: rgb(34, 34, 34); font-family: Inter, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">The value will be returned as the response body</span></td><td style="width: 33.3333%;"><meta charset="utf-8"><span style="color: rgb(34, 34, 34); font-family: Inter, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">If this parameter exists, other parameter values will not be included in the execution output. Make sure the parameter type matches the data provided as the value.</span></td></tr><tr><td style="width: 33.3333%;"><strong>status</strong></td><td style="width: 33.3333%;"><meta charset="utf-8"><span style="color: rgb(34, 34, 34); font-family: Inter, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">The value will be returned as the response status code.</span></td><td style="width: 33.3333%;">The parameter type can be short text, long text, or number. The value must be a valid HTTP status code.</td></tr><tr><td style="width: 33.3333%;"><strong>headers</strong></td><td style="width: 33.3333%;"><meta charset="utf-8"><span style="color: rgb(34, 34, 34); font-family: Inter, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">The value will be added to the HTTP response headers</span></td><td style="width: 33.3333%;"><meta charset="utf-8"><span style="color: rgb(34, 34, 34); font-family: Inter, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">The parameter type must be JSON. The value must consist of valid key-value pairs.</span></td></tr></tbody></table><p>Below is an example of how these parameters can be added to an Exit operator.<br><img src="https://cdn.document360.io/e159bc51-b5b1-4b1f-af39-a9db2fa968d6/Images/Documentation/Use%20output%20parameters%20to%20affect%20the%20HTTP%20response.png" alt="Use output parameters to affect the HTTP response" class="fr-dib fr-bordered" style="width: 1229px;"></p><p>The parameter values determine the HTTP response.<br><img src="https://cdn.document360.io/e159bc51-b5b1-4b1f-af39-a9db2fa968d6/Images/Documentation/HTTP%20response.png" alt="HTTP response" class="fr-dib fr-bordered" style="width: 1221px;"></p><h2>Troubleshooting</h2><p>Below are the responses you can get when executing the workflow with the extended webhook or when trying to retrieve the execution.</p><table style="width: 100%;"><thead><tr><th>Status</th><th>Code</th><th>Description</th></tr></thead><tbody><tr><td style="width: 33.3333%;">Success</td><td style="width: 33.3333%;">200</td><td style="width: 33.3333%;"><br></td></tr><tr><td style="width: 33.3333%;">Execution is in progress</td><td style="width: 33.3333%;">201</td><td style="width: 33.3333%;">Synchronous execution didn't complete yet.</td></tr><tr><td style="width: 33.3333%;">Invalid integration ID</td><td style="width: 33.3333%;">400</td><td style="width: 33.3333%;">The integration ID format is invalid.</td></tr><tr><td style="width: 33.3333%;">Invalid workflow ID</td><td style="width: 33.3333%;">400</td><td style="width: 33.3333%;">The workflow ID format is invalid. If a workflow with the ID exists, ensure the workflow is triggered by the specified integration.</td></tr><tr><td style="width: 33.3333%;"><meta charset="utf-8">Invalid header</td><td style="width: 33.3333%;">400</td><td style="width: 33.3333%;">Incorrect header name or the header secret doesn't match the header name.</td></tr><tr><td style="width: 33.3333%;">Invalid HMAC signature</td><td style="width: 33.3333%;">401</td><td style="width: 33.3333%;"><br></td></tr><tr><td style="width: 33.3333%;"><meta charset="utf-8">Execution not found</td><td style="width: 33.3333%;">404</td><td style="width: 33.3333%;">No execution to retrieve. Ensure no trigger condition prevents the workflow execution with the specified event.&nbsp;</td></tr><tr><td style="width: 33.3333%;">Integration not found</td><td style="width: 33.3333%;">404</td><td style="width: 33.3333%;">No integration with the specified integration ID.</td></tr><tr><td style="width: 33.3333%;"><meta charset="utf-8">Workflow not found</td><td style="width: 33.3333%;">404</td><td style="width: 33.3333%;">No workflow with the specified workflow ID. Make sure the workflow has a published version.</td></tr><tr><td style="width: 33.3333%;">Payload is too large</td><td style="width: 33.3333%;">413</td><td style="width: 33.3333%;">The event body payload is too large.</td></tr><tr><td style="width: 33.3333%;">Rate limit exceeded</td><td style="width: 33.3333%;">429</td><td style="width: 33.3333%;">The automatic executions limit is 25 per second across the account. The event will be <a href="https://learn.torq.io/docs/workflow#workflow-statuses" rel="nofollow" translate="no">queued</a> for 24 hours.</td></tr><tr><td style="width: 33.3333%;">Internal error</td><td style="width: 33.3333%;">500</td><td style="width: 33.3333%;">Retry the request.</td></tr></tbody></table>
